#
# file: nuttx/arch/arm/src/Tupfile
#
# author: Freddie Chopin, http://www.distortec.com http://www.freddiechopin.info
# date: 2012-12-03
#

include_rules

include @(ARCH_CHIP)/files.mk

ARCH_SRCDIR = $(TOPDIR)/arch/@(ARCH)/src
ifeq (@(ARCH_CORTEXM3),y)   # Cortex-M3 is ARMv7-M
	ARCH_SUBDIR = armv7-m
else
	ifeq (@(ARCH_CORTEXM4),y)   # Cortex-M4 is ARMv7E-M
		ARCH_SUBDIR = armv7-m
	else
		ARCH_SUBDIR = arm
	endif
endif

CFLAGS += -I@(ARCH_CHIP) -I$(ARCH_SRCDIR)/common -I$(ARCH_SRCDIR)/$(ARCH_SUBDIR) -I$(TOPDIR)/sched

ASRCS = $(HEAD_ASRC) $(CMN_ASRCS) $(CHIP_ASRCS)
CSRCS = $(CMN_CSRCS) $(CHIP_CSRCS)

: foreach $(ASRCS) |> !as |> {objects}
: foreach $(CSRCS) |> !cc |> {objects}
: foreach $(CXXSRCS) |> !cxx |> {objects}
: {objects} |> !ar |> libarch.a
